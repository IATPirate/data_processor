# Обработчик данных
Дата: 27.10.2024  
Автор: Савурко Тихон

## 1. Описание проекта

Проект представляет собой обработчик данных, предназначенный для: расчета значений по формулам, построения и аппроксимации точек линейной функцией, оценки качества аппроксимации и генерации таблиц для LaTeX из полученных данных

## 2. Реализуемый функционал

- **Чтение данных**: Пользователь сможет передавать данные в виде файлов (`.txt`)
- **Рассчёт данных**: Пользователь сможет вводить формулу, передавать в нее константы и переменные
- **Генерация текста таблицы в формате LaTeX**: По рассчитанным и считанным данным пользователя программа будет генерировать латех код для создания таблицы
- **Построение графиков**: Возможность построить график по своим точкам, а также по функции вида y=f(x), наложить графики друг на друга и настроить их под себя(указание масштаба, названия, границ и т.д.)
- **Аппрокисмация с помощью метода наименьших квадратов(МНК)**: Программа сможет подбирать коэффициенты k и b, с помощью МНК в зависимостях вида y=kx+b и y=kx, где y и x - точки пользователя
- **Рассчёт погрешности**: Возможность рассчитывать погрешности коэффициентов, полученных с помощью МНК
- **Проверка качества аппроксимации методом хи-квадрат**: Оценка качества аппроксимации точек с помощью МНК


---

## 3. Архитектура проекта:

Проект будет иметь графический интерфейс, разработанный с использованием библиотеки PyQt5. Интерфейс программы будет включать основное окно, окно с выбором задачи, окно считывания данных, окно ввода формул, окно построения и настройки графиков и окно генерации таблиц:

- **Основное окно**: Выбор проекта со старыми формулами, данными и графиками или создание нового
- **Окно выбора задачи**: Выбор задачи: ввод данных, ввод формулы, построение и настройка графиков, генерация таблицы
- **Окно ввода данных**: Ввод формата входных данных и выбор необходимого (`.txt`) файла, возможность ввести константы
- **Окно ввода формулы**: Возможность добавления и удаления формулы, название переменной, которая будет рассчитана по этой формуле, ввод констант необходимых для данной формулы(если не была введена в окне ввода данных), просмотр полученных значений для каждой формулы и возможность сохранить их в виде (`.txt`) файла
- **Окно построения и настройки графиков**: Окно состоящее из нескольких вкладок, между которыми можно переключаться. На каждой вкладке есть возможность добавить и настроить новый график на эту систему координат, настроить вид графика и саму систему координат, выбрать метод аппроксимации и выбрать критерий проверки
- **Окно генерации таблицы**: Возможность редактировать старую и создать новую таблицу, настройка формата создания таблицы и ввывод ее латех кода в окне или сохранения в виде файла.

### Основные модули:

1. **Project Creator & Selector** – выбор и создание нового проекта
2. **Data Input** – считывание вводимых данных
3. **Formula Input** – считывание и рассчет данных по вводимым формулам
4. **Graph** – Построение и настройка графиков
5. **Table** – Построение таблицы


`├── main.py # Главный файл программы `  
`├── project.py # Модуль для управление проектами `  
`├── data.py # Модуль для считывания данных `  
`├── formula.py # Модуль для рассчета формул `  
`├── graph.py # Модуль для управления графиками `  
`├── table.py # Модуль для генерации кода таблиц `  
`└── README.md # Документация проекта`

---
## Модуль 1: Project Creator & Selector (Создание и выбор проекта)

### 1.1. Project 
- **Атрибуты:**
  - `title`: название проекта
  - `data`: данные проекта (введенные данные, формулы, графики, таблицы)
  - `date`: дата создания/последнего редактирования проекта

- **Методы:**
  - `edit_title(new_title)`: изменение имени проекта
  - `save()`: сохранение текущего состояния проекта

### 1.2. ProjectManager
- **Атрибуты:**
  - `projects`: список проектов
  - `current_project`: текущий проект

- **Методы:**
  - `create_project(title)`: создание нового проекта с заданным именем
  - `load_project(title)`: загрузка существующего проекта
  - `delete_project(title)`: удаление проекта
  - `filter_project()`: фильтровать проекты по датам

---

## Модуль 2: Data Input

### 2.1. DataLoader
- **Атрибуты:**
  - `file_path`: путь к загружаемому файлу
  - `data`: считанные данные из файла
  - `format`: формат считываемых данных

- **Методы:**
  - `load_from_file(file_path)`: загрузка данных из текстового файла
  - `validate_data()`: проверка данных на корректность

### 2.2. ConstantManager
- **Атрибуты:**
  - `constants`: словарь констант, введенных пользователем

- **Методы:**
  - `add_constant(name, value)`: добавление константы
  - `delete_constant(name)`: удаление константы по имени

---

## Модуль 3: Formula Input

### 3.1. Formula
- **Атрибуты:**
  - `expression`: формула
  - `id`: id формулы
  - `variable`: список значений переменной, которую считает формула

- **Методы:**
  - `calculate_formula(datadict)`: расчет формулы

### 2.2. FormulaConstants
- **Атрибуты:**
  - `formula_constants`: словарь констант, введенных пользователем для данной формулы

- **Методы:**
  - `add_constant(name, value)`: добавление константы
  - `delete_constant(name)`: удаление константы по имени


### 3.3. FormulaManager
- **Атрибуты:**
  - `formulas`: словарь формул

- **Методы:**
  - `add_formula(expression, formula_id)`: добавление формулы
  - `delete_formula(formula_id)`: удаление формулы

---

## Модуль 4: Graph (Построение графиков)

### 4.1. Graph
- **Атрибуты:**
  - `id`: id графика
  - `y_points`: массив с точками по оси y
  - `x_points`: массив с точками по оси x
  - `method`: выбранный метод отображения графика
  - `lim_x_left`: левая граница для точек
  - `lim_x_right`: правая граница для точек
  - `lim_y_top`: верхняя граница для точек
  - `lim_y_bottom`: нижняя граница для точек
  - `xerr`: погрешность точек по оси x
  - `yerr`: погрешность точек по оси y
  - `formula`: формула построения графика

- **Методы:**
  - `approximation_type1()`: аппроксимация линейной функцией вида y = kx
  - `approximation_type2()`: аппроксимация линейной функцией вида y = kx + b
  - `approximation_check()`: проверка качества аппроксимации
  - `approximation_err()`: погрешность аппроксимации

### 4.2. GraphPage
- **Атрибуты:**
  - `page_id`: id страницы с графиками
  - `graphs`: список графиков страницы
  - `lim_x_left`: левая граница для системы координат на странице
  - `lim_x_right`: правая граница для системы координат на странице
  - `lim_y_top`: верхняя граница для системы координат на странице
  - `lim_y_bottom`: нижняя граница для системы координат на странице

- **Методы:**
  - `add_graph(graph_id)`: добавление графика на основе точек
  - `delete_graph(graph_id)`: удаление графика по идентификатору
  - `update_graph()`: обновление графика

### 4.3. GraphManager
- **Атрибуты:**
  - `graphpages`: список всех страниц с графиками проекта

- **Методы:**
  - `add_graphpage(graphpage_id)`: добавление новой страницы c графиком
  - `delete_graphpage(graphpage_id)`: удаление страницы с графиком
  - `update_graphpage()`: обновление страниц с графиками

---

## Модуль 5: Table

### 5.1. Table
- **Атрибуты:**
  - `id`: id таблицы
  - `format`: формат вывода таблицы

- **Методы:**
  - `generate_latex_table()`: генерация кода LaTeX на основе данных
  - `save_table_as_file(table_id, filename)`: сохранение таблицы в виде файла

### 5.2. TableManager
- **Атрибуты:**
  - `tables`: список таблиц проекта

- **Методы:**
  - `create_table(table_id)`: создание таблицы
  - `delete_table(table_id)`: удаление данных из таблицы